# ðŸ”¬ Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð·Ð°Ð¼ÐµÑ‚ÐºÐ¸

## Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ²Ð°Ð´Ñ€Ð¾ÐºÐ¾Ð¿Ñ‚ÐµÑ€Ð¾Ð¼: ÐšÐ°ÑÐºÐ°Ð´Ð½Ð°Ñ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° Ð³Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ

ÐšÐ²Ð°Ð´Ñ€Ð¾ÐºÐ¾Ð¿Ñ‚ÐµÑ€ Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ ÑÐ¾Ð·Ð´Ð°Ð²Ð°Ñ‚ÑŒ Ð³Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°Ð»ÑŒÐ½ÑƒÑŽ ÑÐ¸Ð»Ñƒ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ, Ð¿Ð¾Ñ‚Ð¾Ð¼Ñƒ Ñ‡Ñ‚Ð¾:
- Ð’ÑÐµ 4 Ð´Ð²Ð¸Ð³Ð°Ñ‚ÐµÐ»Ñ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ñ‹ Ð²ÐµÑ€Ñ‚Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾ Ð²Ð²ÐµÑ€Ñ…
- Ð’ Ð³Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°Ð»ÑŒÐ½Ð¾Ð¼ Ð¿Ð¾Ð»ÐµÑ‚Ðµ Ð¸Ñ… ÑÑƒÐ¼Ð¼Ð°Ñ€Ð½Ð°Ñ Ñ‚ÑÐ³Ð° Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð° ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð²Ð²ÐµÑ€Ñ…
- Ð”Ð»Ñ Ð³Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ Ð°Ð¿Ð¿Ð°Ñ€Ð°Ñ‚ Ð´Ð¾Ð»Ð¶ÐµÐ½ **Ð½Ð°ÐºÐ»Ð¾Ð½Ð¸Ñ‚ÑŒÑÑ**

### Ð¤Ð¸Ð·Ð¸ÐºÐ° Ð½Ð°ÐºÐ»Ð¾Ð½Ð°

ÐšÐ¾Ð³Ð´Ð° Ð´Ñ€Ð¾Ð½ Ð½Ð°ÐºÐ»Ð¾Ð½ÑÐµÑ‚ÑÑ Ð½Ð° ÑƒÐ³Ð¾Ð» Î¸:
```
Ð’ÐµÑ€Ñ‚Ð¸ÐºÐ°Ð»ÑŒÐ½Ð°Ñ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð° Ñ‚ÑÐ³Ð¸: F_y = F_total * cos(Î¸)
Ð“Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°Ð»ÑŒÐ½Ð°Ñ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð° Ñ‚ÑÐ³Ð¸: F_x = F_total * sin(Î¸)
```

ÐŸÑ€Ð¸Ð¼ÐµÑ€:
- ÐŸÑ€Ð¸ Ð½Ð°ÐºÐ»Ð¾Ð½Ðµ 15Â° Ð²Ð¿ÐµÑ€ÐµÐ´ â†’ ~26% Ñ‚ÑÐ³Ð¸ Ð¸Ð´ÐµÑ‚ Ð½Ð° Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ðµ Ð²Ð¿ÐµÑ€ÐµÐ´
- ÐŸÑ€Ð¸ Ð½Ð°ÐºÐ»Ð¾Ð½Ðµ 30Â° Ð²Ð¿ÐµÑ€ÐµÐ´ â†’ 50% Ñ‚ÑÐ³Ð¸ Ð¸Ð´ÐµÑ‚ Ð½Ð° Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ðµ Ð²Ð¿ÐµÑ€ÐµÐ´

### ÐšÐ°ÑÐºÐ°Ð´Ð½Ð¾Ðµ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ (Cascaded Control)

#### Ð’Ð½ÐµÑˆÐ½Ð¸Ð¹ ÐºÐ¾Ð½Ñ‚ÑƒÑ€: Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÐµÐ¹
```
Ð’Ñ…Ð¾Ð´: ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ (target_pos - current_pos)
PID: F_control = kp*error + kd*velocity + ki*âˆ«error
Ð’Ñ‹Ñ…Ð¾Ð´: Ð–ÐµÐ»Ð°ÐµÐ¼Ð°Ñ ÑÐ¸Ð»Ð° Ð² Ð¼Ð¸Ñ€Ð¾Ð²Ñ‹Ñ… ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ð°Ñ…
```

#### ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ðµ: Ð¡Ð¸Ð»Ð° â†’ Ð£Ð³Ð¾Ð»
```
Ð–ÐµÐ»Ð°ÐµÐ¼Ð°Ñ Ð³Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°Ð»ÑŒÐ½Ð°Ñ ÑÐ¸Ð»Ð° â†’ Ð–ÐµÐ»Ð°ÐµÐ¼Ñ‹Ð¹ ÑƒÐ³Ð¾Ð» Ð½Ð°ÐºÐ»Ð¾Ð½Ð°

desiredPitch = atan2(F_x, F_total)  // Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ðµ Ð²Ð¿ÐµÑ€ÐµÐ´/Ð½Ð°Ð·Ð°Ð´
desiredRoll = atan2(-F_z, F_total)  // Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ðµ Ð²Ð»ÐµÐ²Ð¾/Ð²Ð¿Ñ€Ð°Ð²Ð¾
```

ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ Ð¼Ð¸Ð½ÑƒÑ Ñƒ F_z? ÐšÐ¾Ð½Ð²ÐµÐ½Ñ†Ð¸Ñ Ð¾ÑÐµÐ¹:
- Roll Ð¿Ð¾Ð»Ð¾Ð¶Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ = Ð½Ð°ÐºÐ»Ð¾Ð½ Ð²Ð¿Ñ€Ð°Ð²Ð¾ = Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ðµ Ð²Ð»ÐµÐ²Ð¾ (Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð¾Ð¿Ð¾Ð»Ð¾Ð¶Ð½Ð¾ Z)

#### Ð’Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½Ð¸Ð¹ ÐºÐ¾Ð½Ñ‚ÑƒÑ€: Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¾Ñ€Ð¸ÐµÐ½Ñ‚Ð°Ñ†Ð¸ÐµÐ¹
```
Ð’Ñ…Ð¾Ð´: ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ñ€Ð¸ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸ (desired_angle - current_angle)
PID: Ï„_control = kp*error + kd*angular_velocity + ki*âˆ«error
Ð’Ñ‹Ñ…Ð¾Ð´: Ð£Ð¿Ñ€Ð°Ð²Ð»ÑÑŽÑ‰Ð¸Ð¹ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚
```

#### Ð Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð½Ð° Ð´Ð²Ð¸Ð³Ð°Ñ‚ÐµÐ»Ð¸
```
ÐœÐ¾Ð¼ÐµÐ½Ñ‚Ñ‹ â†’ Ð Ð°Ð·Ð½Ð¸Ñ†Ð° Ð² Ñ‚ÑÐ³Ð°Ñ… Ð´Ð²Ð¸Ð³Ð°Ñ‚ÐµÐ»ÐµÐ¹

Roll (ÐºÑ€ÐµÐ½): Ñ€Ð°Ð·Ð½Ð¸Ñ†Ð° Ð¼ÐµÐ¶Ð´Ñƒ Ð¿Ñ€Ð°Ð²Ñ‹Ð¼ Ð¸ Ð»ÐµÐ²Ñ‹Ð¼
Pitch (Ñ‚Ð°Ð½Ð³Ð°Ð¶): Ñ€Ð°Ð·Ð½Ð¸Ñ†Ð° Ð¼ÐµÐ¶Ð´Ñƒ Ð¿ÐµÑ€ÐµÐ´Ð½Ð¸Ð¼ Ð¸ Ð·Ð°Ð´Ð½Ð¸Ð¼
Yaw (Ñ€Ñ‹ÑÐºÐ°Ð½Ð¸Ðµ): Ñ€ÐµÐ°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¹ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚ Ð¿Ñ€Ð¾Ð¿ÐµÐ»Ð»ÐµÑ€Ð¾Ð²
```

### Ð¡Ñ…ÐµÐ¼Ð° ÐºÐ°ÑÐºÐ°Ð´Ð½Ð¾Ð³Ð¾ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OUTER LOOP (POSITION)                     â”‚
â”‚                                                               â”‚
â”‚  Target Position â”€â”€â–º PID â”€â”€â–º Desired Force (X, Y, Z)        â”‚
â”‚       (0, 2, 0)                    â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Force to Angle Transform  â”‚
                    â”‚                             â”‚
                    â”‚  F_x â†’ pitch (Ð²Ð¿ÐµÑ€ÐµÐ´/Ð½Ð°Ð·Ð°Ð´) â”‚
                    â”‚  F_z â†’ roll (Ð²Ð»ÐµÐ²Ð¾/Ð²Ð¿Ñ€Ð°Ð²Ð¾)  â”‚
                    â”‚  F_y â†’ thrust (Ð²Ð²ÐµÑ€Ñ…/Ð²Ð½Ð¸Ð·)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  INNER LOOP (ORIENTATION)                    â”‚
â”‚                                                               â”‚
â”‚  Desired Angles â”€â”€â–º PID â”€â”€â–º Control Torque (Ï„_x, Ï„_y, Ï„_z)  â”‚
â”‚  (roll, pitch, yaw)                â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Torque to Motors Mixing    â”‚
                    â”‚                              â”‚
                    â”‚  Ï„ â†’ Motor speeds [0,1,2,3]  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   QUADCOPTER     â”‚
                        â”‚   4 Motors       â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð° ÐºÐ°ÑÐºÐ°Ð´Ð½Ð¾Ð³Ð¾ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ

1. **ÐœÐ¾Ð´ÑƒÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ**: ÐœÐ¾Ð¶Ð½Ð¾ Ð½Ð°ÑÑ‚Ñ€Ð°Ð¸Ð²Ð°Ñ‚ÑŒ ÐºÐ¾Ð½Ñ‚ÑƒÑ€Ñ‹ Ð½ÐµÐ·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾
2. **Ð¡Ñ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ**: Ð’Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½Ð¸Ð¹ ÐºÐ¾Ð½Ñ‚ÑƒÑ€ ÑÑ‚Ð°Ð±Ð¸Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ Ð±Ñ‹ÑÑ‚Ñ€ÐµÐµ Ð²Ð½ÐµÑˆÐ½ÐµÐ³Ð¾
3. **Ð¤Ð¸Ð·Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾ÑÑ‚ÑŒ**: Ð£Ñ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ ÐºÐ²Ð°Ð´Ñ€Ð¾ÐºÐ¾Ð¿Ñ‚ÐµÑ€Ð°
4. **ÐœÐ°ÑÑˆÑ‚Ð°Ð±Ð¸Ñ€ÑƒÐµÐ¼Ð¾ÑÑ‚ÑŒ**: Ð›ÐµÐ³ÐºÐ¾ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ ÐºÐ¾Ð½Ñ‚ÑƒÑ€Ñ‹

### Ð¢Ð¸Ð¿Ð¸Ñ‡Ð½Ñ‹Ðµ Ñ‡Ð°ÑÑ‚Ð¾Ñ‚Ñ‹ ÐºÐ¾Ð½Ñ‚ÑƒÑ€Ð¾Ð²

- Ð’Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½Ð¸Ð¹ (Ð¾Ñ€Ð¸ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ): 250-500 Hz - Ð±Ñ‹ÑÑ‚Ñ€Ð°Ñ ÑÑ‚Ð°Ð±Ð¸Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ
- Ð’Ð½ÐµÑˆÐ½Ð¸Ð¹ (Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ): 50-100 Hz - Ð±Ð¾Ð»ÐµÐµ Ð¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾Ðµ Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
- ÐÐ°ÑˆÐ° ÑÐ¸Ð¼ÑƒÐ»ÑÑ†Ð¸Ñ: 60 Hz Ð´Ð»Ñ Ð¾Ð±Ð¾Ð¸Ñ… (ÑƒÐ¿Ñ€Ð¾Ñ‰ÐµÐ½Ð¸Ðµ)

### ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° ÐºÐ¾ÑÑ„Ñ„Ð¸Ñ†Ð¸ÐµÐ½Ñ‚Ð¾Ð² PID

#### ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ñ (Ð¼ÐµÐ´Ð»ÐµÐ½Ð½ÐµÐµ, Ð¿Ð»Ð°Ð²Ð½ÐµÐµ):
```
kp = 10.0  - Ñ€ÐµÐ°ÐºÑ†Ð¸Ñ Ð½Ð° Ð¾Ñ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¸Ðµ Ð¾Ñ‚ Ñ†ÐµÐ»Ð¸
kd = 5.0   - Ð´ÐµÐ¼Ð¿Ñ„Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚Ð¸
ki = 0.1   - ÐºÐ¾Ð¼Ð¿ÐµÐ½ÑÐ°Ñ†Ð¸Ñ Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ñ‹Ñ… ÑÐ¼ÐµÑ‰ÐµÐ½Ð¸Ð¹ (Ð²ÐµÑ‚ÐµÑ€)
```

#### ÐžÑ€Ð¸ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ (Ð±Ñ‹ÑÑ‚Ñ€ÐµÐµ, Ð°Ð³Ñ€ÐµÑÑÐ¸Ð²Ð½ÐµÐµ):
```
kp = 8.0   - Ð±Ñ‹ÑÑ‚Ñ€Ð°Ñ Ñ€ÐµÐ°ÐºÑ†Ð¸Ñ Ð½Ð° Ð½Ð°ÐºÐ»Ð¾Ð½
kd = 4.0   - Ð¿Ñ€ÐµÐ´Ð¾Ñ‚Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð»ÐµÐ±Ð°Ð½Ð¸Ð¹
ki = 0.05  - Ð¼Ð°Ð»Ð°Ñ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ð»ÑŒÐ½Ð°Ñ (Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ Ð½Ðµ Ð½ÑƒÐ¶Ð½Ð°)
```

### ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸

```javascript
maxTiltAngle = 30Â°  // ÐŸÑ€ÐµÐ´Ð¾Ñ‚Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¾Ð¿Ð°ÑÐ½Ñ‹Ðµ Ð½Ð°ÐºÐ»Ð¾Ð½Ñ‹
maxControlForce     // ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡Ð¸Ð²Ð°ÐµÑ‚ Ð°Ð³Ñ€ÐµÑÑÐ¸Ð²Ð½Ð¾ÑÑ‚ÑŒ
maxControlTorque    // ÐŸÑ€ÐµÐ´Ð¾Ñ‚Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð±Ñ‹ÑÑ‚Ñ€Ñ‹Ðµ Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ñ
maxIntegralError    // Anti-windup Ð·Ð°Ñ‰Ð¸Ñ‚Ð°
```

### ÐšÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ð½Ñ‹Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹

**ÐœÐ¸Ñ€Ð¾Ð²Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð° (World Frame):**
- X: Ð²Ð¿Ñ€Ð°Ð²Ð¾
- Y: Ð²Ð²ÐµÑ€Ñ…
- Z: Ð¾Ñ‚ Ð½Ð°Ð±Ð»ÑŽÐ´Ð°Ñ‚ÐµÐ»Ñ (Ð¿Ñ€Ð°Ð²Ð°Ñ Ñ‚Ñ€Ð¾Ð¹ÐºÐ°)

**Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð´Ñ€Ð¾Ð½Ð° (Body Frame):**
- X: Ð²Ð¿ÐµÑ€ÐµÐ´
- Y: Ð²Ð²ÐµÑ€Ñ… Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð´Ñ€Ð¾Ð½Ð°
- Z: Ð²Ð¿Ñ€Ð°Ð²Ð¾ Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð´Ñ€Ð¾Ð½Ð°

**Ð£Ð³Ð»Ñ‹ Ð­Ð¹Ð»ÐµÑ€Ð° (Ð¿Ð¾Ñ€ÑÐ´Ð¾Ðº XYZ):**
- Roll (ÐºÑ€ÐµÐ½): Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ðµ Ð²Ð¾ÐºÑ€ÑƒÐ³ X - Ð½Ð°ÐºÐ»Ð¾Ð½ Ð²Ð»ÐµÐ²Ð¾/Ð²Ð¿Ñ€Ð°Ð²Ð¾
- Pitch (Ñ‚Ð°Ð½Ð³Ð°Ð¶): Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ðµ Ð²Ð¾ÐºÑ€ÑƒÐ³ Z - Ð½Ð°ÐºÐ»Ð¾Ð½ Ð²Ð¿ÐµÑ€ÐµÐ´/Ð½Ð°Ð·Ð°Ð´
- Yaw (Ñ€Ñ‹ÑÐºÐ°Ð½Ð¸Ðµ): Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ðµ Ð²Ð¾ÐºÑ€ÑƒÐ³ Y - Ð¿Ð¾Ð²Ð¾Ñ€Ð¾Ñ‚ Ð²Ð»ÐµÐ²Ð¾/Ð²Ð¿Ñ€Ð°Ð²Ð¾

### ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ‚ÑÐ³Ð¸: Body â†’ World

Ð¢ÑÐ³Ð° Ð² Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ Ð´Ñ€Ð¾Ð½Ð°: `[0, F_thrust, 0]` (Ð²ÑÐµÐ³Ð´Ð° Ð²Ð²ÐµÑ€Ñ…)

ÐŸÐ¾ÑÐ»Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð²Ð¾Ñ€Ð¾Ñ‚Ð¾Ð² (roll, pitch, yaw), Ð² Ð¼Ð¸Ñ€Ð¾Ð²Ð¾Ð¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ:

```javascript
// Ð£Ð¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ð°Ñ Ñ„Ð¾Ñ€Ð¼ÑƒÐ»Ð° (Ð´Ð»Ñ Ð¼Ð°Ð»Ñ‹Ñ… ÑƒÐ³Ð»Ð¾Ð² Ð¸ Ð±ÐµÐ· yaw):
thrustX = F_thrust * sin(pitch)
thrustY = F_thrust * cos(pitch) * cos(roll)
thrustZ = -F_thrust * sin(roll) * cos(pitch)
```

**Ð¤Ð¸Ð·Ð¸ÐºÐ°:**
- **pitch > 0** (Ð½Ð°ÐºÐ»Ð¾Ð½ Ð²Ð¿ÐµÑ€ÐµÐ´) â†’ `thrustX > 0` (ÑÐ¸Ð»Ð° Ð²Ð¿ÐµÑ€ÐµÐ´)
- **roll > 0** (Ð½Ð°ÐºÐ»Ð¾Ð½ Ð²Ð¿Ñ€Ð°Ð²Ð¾) â†’ `thrustZ < 0` (ÑÐ¸Ð»Ð° Ð²Ð»ÐµÐ²Ð¾, Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð¾Ð¿Ð¾Ð»Ð¾Ð¶Ð½Ð¾ Z)
- ÐŸÑ€Ð¸ Ð»ÑŽÐ±Ð¾Ð¼ Ð½Ð°ÐºÐ»Ð¾Ð½Ðµ `thrustY` ÑƒÐ¼ÐµÐ½ÑŒÑˆÐ°ÐµÑ‚ÑÑ (Ñ‚ÐµÑ€ÑÐµÑ‚ÑÑ Ð²Ñ‹ÑÐ¾Ñ‚Ð°)

**ÐŸÑ€Ð¸Ð¼ÐµÑ€:**
```
pitch = 15Â° (Ð½Ð°ÐºÐ»Ð¾Ð½ Ð²Ð¿ÐµÑ€ÐµÐ´):
  thrustX = F * 0.259 â‰ˆ 26% Ñ‚ÑÐ³Ð¸ Ð²Ð¿ÐµÑ€ÐµÐ´
  thrustY = F * 0.966 â‰ˆ 97% Ñ‚ÑÐ³Ð¸ Ð²Ð²ÐµÑ€Ñ…

pitch = 30Â°:
  thrustX = F * 0.500 = 50% Ñ‚ÑÐ³Ð¸ Ð²Ð¿ÐµÑ€ÐµÐ´
  thrustY = F * 0.866 = 87% Ñ‚ÑÐ³Ð¸ Ð²Ð²ÐµÑ€Ñ…
```

**Ð’ÐÐ–ÐÐž:** `yaw` Ð½Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð² ÑÑ‚Ð¾Ð¹ ÑƒÐ¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼ÑƒÐ»Ðµ, Ñ‚.Ðº. Ð¿Ð¾Ð²Ð¾Ñ€Ð¾Ñ‚ Ð²Ð¾ÐºÑ€ÑƒÐ³ Ð²ÐµÑ€Ñ‚Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¹ Ð¾ÑÐ¸ Ð½Ðµ Ð¼ÐµÐ½ÑÐµÑ‚ Ð²ÐµÑ€Ñ‚Ð¸ÐºÐ°Ð»ÑŒÐ½ÑƒÑŽ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñƒ Ñ‚ÑÐ³Ð¸!

### Ð¤Ð¾Ñ€Ð¼ÑƒÐ»Ð° Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð›ÑÐ¿ÑƒÐ½Ð¾Ð²Ð°

```
V(x) = 0.5 * (
    ||position_error||Â² +
    ||rotation_error||Â² +
    ||velocity||Â² +
    ||angular_velocity||Â²
)
```

Ð¡Ð²Ð¾Ð¹ÑÑ‚Ð²Ð°:
- V(x) â‰¥ 0 (Ð½ÐµÐ¾Ñ‚Ñ€Ð¸Ñ†Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ)
- V(x) = 0 Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ x = 0 (Ð½ÑƒÐ»ÐµÐ²Ð°Ñ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð² Ñ†ÐµÐ»Ð¸)
- dV/dt < 0 Ð¿Ñ€Ð¸ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð¼ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ð¸ (ÑƒÐ±Ñ‹Ð²Ð°ÑŽÑ‰Ð°Ñ)

Ð­Ñ‚Ð¾ Ð³Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ Ð°ÑÐ¸Ð¼Ð¿Ñ‚Ð¾Ñ‚Ð¸Ñ‡ÐµÑÐºÑƒÑŽ ÑƒÑÑ‚Ð¾Ð¹Ñ‡Ð¸Ð²Ð¾ÑÑ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹.

### ÐžÑ‚Ð»Ð¸Ñ‡Ð¸Ñ Ð¾Ñ‚ Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð´Ñ€Ð¾Ð½Ð°

**Ð£Ð¿Ñ€Ð¾Ñ‰ÐµÐ½Ð¸Ñ Ð² ÑÐ¸Ð¼ÑƒÐ»ÑÑ†Ð¸Ð¸:**
1. Ð˜Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐµÐ¼ ÑÑ„Ñ„ÐµÐºÑ‚ Ð¿Ñ€ÐµÑ†ÐµÑÑÐ¸Ð¸ Ð³Ð¸Ñ€Ð¾ÑÐºÐ¾Ð¿Ð°
2. Ð£Ð¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ð°Ñ Ð°ÑÑ€Ð¾Ð´Ð¸Ð½Ð°Ð¼Ð¸ÐºÐ° (Ð»Ð¸Ð½ÐµÐ¹Ð½Ð¾Ðµ ÑÐ¾Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð»ÐµÐ½Ð¸Ðµ)
3. ÐœÐ³Ð½Ð¾Ð²ÐµÐ½Ð½Ð°Ñ Ñ€ÐµÐ°ÐºÑ†Ð¸Ñ Ð´Ð²Ð¸Ð³Ð°Ñ‚ÐµÐ»ÐµÐ¹ (Ð½ÐµÑ‚ Ð¸Ð½ÐµÑ€Ñ†Ð¸Ð¸)
4. Ð˜Ð´ÐµÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ð´Ð°Ñ‚Ñ‡Ð¸ÐºÐ¸ (Ð½ÐµÑ‚ ÑˆÑƒÐ¼Ð°)
5. ÐžÐ´Ð¸Ð½Ð°ÐºÐ¾Ð²Ð°Ñ Ñ‡Ð°ÑÑ‚Ð¾Ñ‚Ð° Ð´Ð»Ñ Ð²ÑÐµÑ… ÐºÐ¾Ð½Ñ‚ÑƒÑ€Ð¾Ð² (60 Hz)

**Ð’ Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸:**
1. Ð­Ñ„Ñ„ÐµÐºÑ‚Ñ‹ Ð³Ð¸Ñ€Ð¾ÑÐºÐ¾Ð¿Ð° Ð¾Ñ‚ Ð²Ñ€Ð°Ñ‰Ð°ÑŽÑ‰Ð¸Ñ…ÑÑ Ð¿Ñ€Ð¾Ð¿ÐµÐ»Ð»ÐµÑ€Ð¾Ð²
2. ÐÐµÐ»Ð¸Ð½ÐµÐ¹Ð½Ð°Ñ Ð°ÑÑ€Ð¾Ð´Ð¸Ð½Ð°Ð¼Ð¸ÐºÐ°, Ð²Ð¸Ñ…Ñ€Ð¸, ground effect
3. Ð—Ð°Ð´ÐµÑ€Ð¶ÐºÐ° Ð´Ð²Ð¸Ð³Ð°Ñ‚ÐµÐ»ÐµÐ¹ (~50-200 Ð¼Ñ)
4. Ð¨ÑƒÐ¼ Ð°ÐºÑÐµÐ»ÐµÑ€Ð¾Ð¼ÐµÑ‚Ñ€Ð°/Ð³Ð¸Ñ€Ð¾ÑÐºÐ¾Ð¿Ð°/Ð¼Ð°Ð³Ð½ÐµÑ‚Ð¾Ð¼ÐµÑ‚Ñ€Ð°
5. Ð Ð°Ð·Ð½Ñ‹Ðµ Ñ‡Ð°ÑÑ‚Ð¾Ñ‚Ñ‹ ÐºÐ¾Ð½Ñ‚ÑƒÑ€Ð¾Ð² (IMU: 1000Hz, Position: 50Hz)
6. Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ ÐšÐ°Ð»Ð¼Ð°Ð½Ð° Ð´Ð»Ñ Ð¾Ñ†ÐµÐ½ÐºÐ¸ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ

---

**ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ ÑÑÑ‹Ð»ÐºÐ¸:**
- [PX4 Flight Stack](https://docs.px4.io/)
- [Betaflight Configurator](https://github.com/betaflight/betaflight-configurator)
- [Quadcopter Dynamics (paper)](https://www.kth.se/polopoly_fs/1.588039.1600688317!/Thesis%20KTH%20-%20Francesco%20Sabatino.pdf)

